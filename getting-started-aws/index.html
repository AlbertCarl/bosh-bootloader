



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.9.2">
    
    
      
        <title>Getting started aws - BBL</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.ba0fd1a6.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#getting-started-aws" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="BBL" class="md-header-nav__button md-logo">
          
            <img src="../theme/bosh.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                BBL
              </span>
              <span class="md-header-nav__topic">
                Getting started aws
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../theme/bosh.svg" width="48" height="48">
      
    </span>
    BBL
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="BOSH Bootloader" class="md-nav__link">
      BOSH Bootloader
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../advanced-configuration/" title="Advanced configuration" class="md-nav__link">
      Advanced configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cf-lbs/" title="Cloud Foundry Load Balancers" class="md-nav__link">
      Cloud Foundry Load Balancers
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cleaning-up/" title="Cleaning Up" class="md-nav__link">
      Cleaning Up
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cloudfoundry/" title="Cloudfoundry" class="md-nav__link">
      Cloudfoundry
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../concourse/" title="Concourse" class="md-nav__link">
      Concourse
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../credhub/" title="Accessing the BOSH director credhub" class="md-nav__link">
      Accessing the BOSH director credhub
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../customization/" title="Customizing your infrastructure and director" class="md-nav__link">
      Customizing your infrastructure and director
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Getting started aws
      </label>
    
    <a href="./" title="Getting started aws" class="md-nav__link md-nav__link--active">
      Getting started aws
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started-aws" title="Getting started: AWS" class="md-nav__link">
    Getting started: AWS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-an-iam-user" title="Creating an IAM user" class="md-nav__link">
    Creating an IAM user
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bbl-up" title="bbl up" class="md-nav__link">
    bbl up
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-to-the-bosh-director" title="Connecting to the BOSH director" class="md-nav__link">
    Connecting to the BOSH director
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternatives-to-bbl-print-env" title="Alternatives to bbl print-env" class="md-nav__link">
    Alternatives to bbl print-env
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting-started-azure/" title="Getting started azure" class="md-nav__link">
      Getting started azure
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting-started-gcp/" title="Getting started gcp" class="md-nav__link">
      Getting started gcp
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting-started-openstack/" title="Getting started openstack" class="md-nav__link">
      Getting started openstack
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting-started-vsphere/" title="Getting started vsphere" class="md-nav__link">
      Getting started vsphere
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../howto-ssh/" title="Howto ssh" class="md-nav__link">
      Howto ssh
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../known-issues/" title="Known issues" class="md-nav__link">
      Known issues
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../upgrade/" title="Upgrade" class="md-nav__link">
      Upgrade
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started-aws" title="Getting started: AWS" class="md-nav__link">
    Getting started: AWS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-an-iam-user" title="Creating an IAM user" class="md-nav__link">
    Creating an IAM user
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bbl-up" title="bbl up" class="md-nav__link">
    bbl up
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-to-the-bosh-director" title="Connecting to the BOSH director" class="md-nav__link">
    Connecting to the BOSH director
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternatives-to-bbl-print-env" title="Alternatives to bbl print-env" class="md-nav__link">
    Alternatives to bbl print-env
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Getting started aws</h1>
                
                <h3 id="getting-started-aws">Getting started: AWS</h3>
<p>This guide is a walkthrough for deploying a BOSH director with <code>bbl</code>
on AWS. Upon completion, you will have the following:</p>
<ol>
<li>A BOSH director</li>
<li>A jumpbox</li>
<li>A set of randomly generated BOSH director credentials</li>
<li>A generated keypair allowing you to SSH into the BOSH director and
any instances BOSH deploys</li>
<li>A copy of the manifest the BOSH director was deployed with</li>
<li>A basic cloud config</li>
</ol>
<h3 id="creating-an-iam-user">Creating an IAM user</h3>
<p>In order for <code>bbl</code> to interact with AWS, an <code>IAM</code> user must be created.</p>
<p>This user will be issuing API requests to create the infrastructure such
as EC2 instances, load balancers, subnets, etc.</p>
<p>The user must have the following <code>policy</code>:</p>
<pre><code>{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Sid&quot;: &quot;VisualEditor0&quot;,
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;logs:*&quot;,
                &quot;elasticloadbalancing:*&quot;,
                &quot;cloudformation:*&quot;,
                &quot;iam:*&quot;,
                &quot;kms:*&quot;,
                &quot;route53:*&quot;,
                &quot;ec2:*&quot;
            ],
            &quot;Resource&quot;: &quot;*&quot;
        }
    ]
}
</code></pre>

<p>To create a user and associated policy with the AWS CLI run the 
following commands (policy text must be in your clipboard):</p>
<pre><code>$ aws iam create-user --user-name &quot;bbl-user&quot;
$ aws iam put-user-policy --user-name &quot;bbl-user&quot; \
    --policy-name &quot;bbl-policy&quot; \
    --policy-document &quot;$(pbpaste)&quot;
$ aws iam create-access-key --user-name &quot;bbl-user&quot;
</code></pre>

<p>The <code>create-access-key</code> command will write an "access key id" and "secret 
access key" to the terminal. These values are important and should
be kept secret. In the next section <code>bbl</code> will use these commands to
create infrastructure on AWS.</p>
<h3 id="bbl-up">bbl up</h3>
<p><code>bbl</code> will create infrastructure and deploy a BOSH director with the
following command:</p>
<pre><code>bbl up \
    --aws-access-key-id &lt;INSERT ACCESS KEY ID&gt; \
    --aws-secret-access-key &lt;INSERT SECRET ACCESS KEY&gt; \
    --aws-region us-west-1 \
    --iaas aws
</code></pre>

<p>The process takes around 5-8 minutes.</p>
<p>The bbl state directory contains all of the files that were used to
create your bosh director. This should be checked in to version control,
so that you have all the information necessary to later destroy or
update this environment at a later date.</p>
<h3 id="connecting-to-the-bosh-director">Connecting to the BOSH director</h3>
<p>To setup your BOSH CLI with the director you'll need the following
command to set the credentials:</p>
<pre><code>eval &quot;$(bbl print-env)&quot;
</code></pre>

<h4 id="alternatives-to-bbl-print-env">Alternatives to <code>bbl print-env</code></h4>
<p>Separate commands are available for the <code>bbl print-env</code> fields:</p>
<pre><code>$ bbl director-address
https://10.0.0.6:25555

$ bbl director-username
user-d3783rk

$ bbl director-password
p-23dah71skl

$ bbl director-ca-cert
-----BEGIN CERTIFICATE-----
MIIDtzCCAp+gAwIBAgIJAIPgaUgWRCE8MA0GCSqGSIb3DQEBBQUAMEUxCzAJBgNV
...
-----END CERTIFICATE-----
</code></pre>

<p>You might save the CA certificate to a file:</p>
<pre><code>$ bbl director-ca-cert &gt; bosh.crt
$ export BOSH_CA_CERT=bosh.crt
</code></pre>

<p>To login:</p>
<pre><code>$ export BOSH_ENVIRONMENT=$(bbl director-address)
$ bosh alias-env &lt;INSERT TARGET NAME&gt;
$ bosh log-in
Username: user-d3783rk
Password: p-23dah71sk1
</code></pre>

<p>Display cloud config to test setup and show configuration mapping:</p>
<pre><code>$ bosh cloud-config
...
</code></pre>

<p>Now you're ready to deploy software with BOSH.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../customization/" title="Customizing your infrastructure and director" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Customizing your infrastructure and director
              </span>
            </div>
          </a>
        
        
          <a href="../getting-started-azure/" title="Getting started azure" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Getting started azure
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>